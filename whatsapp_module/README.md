
```
                      ____  ____  ____       __    __  __ __   ____  ______  _____  ____  ____  ____  
                     /    Tl    j|    \     |  T__T  T|  T  T /    T|      T/ ___/ /    T|    \|    \ 
                    Y  o  | |  T |  D  )    |  |  |  ||  l  |Y  o  ||      (   \_ Y  o  ||  o  )  o  )
                    |     | |  | |    /     |  |  |  ||  _  ||     |l_j  l_j\__  T|     ||   _/|   _/ 
                    |  _  | |  | |    \     l  `  '  !|  |  ||  _  |  |  |  /  \ ||  _  ||  |  |  |   
                    |  |  | j  l |  .  Y     \      / |  |  ||  |  |  |  |  \    ||  |  ||  |  |  |   
                    l__j__j|____jl__j\_j      \_/\_/  l__j__jl__j__j  l__j   \___jl__j__jl__j  l__j   
                                                                                   
```
# WhatsApp Automation Project

This project automates the handling of WhatsApp messages using Selenium for Web WhatsApp interaction and OpenAI's API for AI-driven responses. It includes multiple versions of both the AI assistant and the WhatsApp automation agent, each adding more functionality and reliability. This document provides an overview of each file, setup instructions, and workflow guidance.

## Project Files

### AI Agent Files

1. **`ai_agent.py`**: Basic AI agent without memory. Initial version with limited capabilities.

2. **`ai_agent_V2.py`**: AI agent with memory, allowing the agent to keep track of context across interactions. However, it lacks structured responses and has bugs in confirmation handling.

3. **`ai_agent_V3.py`**: AI agent with memory and heuristic approach in query handling. More robust than V2 but not fully reliable.

4. **`ai_agent_V4.py`**: AI agent with memory, enhanced prompt, and structured responses. Improved handling of queries and responses.

5. **`ai_agent_V5.py`**: The most advanced AI agent version. Includes memory, enhanced prompt, structured responses, and logs interactions to the file system for better tracking. This version is recommended for production use.

### WhatsApp Automation Agent Files

1. **`whatsapp_agent.py`**: WhatsApp agent for receiving messages. Includes complete functionality for receiving messages but has unreliable message-sending functionality with the AI.

2. **`whatsapp_agent_V2.py`**: Improved WhatsApp agent without AI-based message sending. This version reliably handles receiving and sending messages generated by the AI agent, with the ability to run in both UI and headless modes. This is the recommended version for message handling.

### Configuration Files

- **`.env`**: Create .env file and paste your OpenAI API key here to enable the AI functionality. The AI agent will read this key automatically.

- **`get_chrome_profile_path()` in `whatsapp_agent.py` and `whatsapp_agent_V2.py`**: Modify this function to set the correct path for your Chrome profile based on your operating system.

## Initial Setup

### Step 1: Install Dependencies

To ensure cross-platform compatibility, all necessary dependencies are listed in the `requirements.txt` file.

Install dependencies by running:

```bash
pip install -r requirements.txt
```

### Step 2: Configure Chrome Profile Path

In `whatsapp_agent.py` or `whatsapp_agent_V2.py`, update the `get_chrome_profile_path()` function to point to your Chrome profile path based on your OS:

- **Windows**: Update line 29.
- **macOS**: Update line 32.
- **Linux**: Update line 35.

### Step 3: Login to Web WhatsApp

1. Set `ui_mode = True` on line 21 in `whatsapp_agent_V2.py` to enable UI mode.
2. Run the file in a terminal to open Web WhatsApp and scan the QR code for login.
3. After the initial login, the cookies will be saved, allowing future runs in headless (background) mode if desired by changing `ui_mode` from `True` to `False`.

## Workflow

### Running the Agents

1. **Start the WhatsApp Agent**:
   Open a terminal and run the following command to start the WhatsApp receiving and sending agent:

   ```bash
   python whatsapp_agent_V2.py
   ```

   - **Note**: Ensure the `get_chrome_profile_path()` function is correctly configured with your Chrome path for your OS.
   - **Headless Mode**: After the initial login, you can set `ui_mode = False` to run in headless mode.

2. **Start the AI Agent**:
   In a separate terminal, run the AI agent with the following command:

   ```bash
   python ai_agent_V5.py
   ```

   - Ensure you have pasted your OpenAI API key in the `.env` file.
   - You can now interact with the AI agent to list unread messages, request AI-generated responses, and confirm message sending.

### Workflow Summary

- **Message Reception**: `whatsapp_agent_V2.py` continuously monitors incoming messages and saves them to `recv_whatsapp.txt`.
- **AI Interaction**: You can query the AI agent to view unread messages or generate responses.
- **Message Sending**: If `whatsapp_agent_V2.py` is running, confirmed responses will be sent immediately. If not, they are saved to `send_whatsapp.txt` and will be sent the next time the WhatsApp agent is active.

## Important Notes

- **Running Modes**: By default, the WhatsApp agent runs in UI mode. After the initial QR scan and login, you can switch to headless mode (`ui_mode = False`) to keep it running in the background.
- **Message Saving**: The AI agent's responses and confirmations are saved in a structured format in `send_whatsapp.txt` for tracking purposes.
- **Cross-Platform Compatibility**: This setup should work across Windows, macOS, and Linux, provided the Chrome profile path is set correctly.

## Troubleshooting

- **Chrome Profile Issues**: Ensure the Chrome profile path in `get_chrome_profile_path()` is correct for your OS.
- **AI Agent Errors**: If the AI agent encounters errors, check that your OpenAI API key is correctly set in the `.env` file.

This setup enables automated, AI-powered handling of WhatsApp messages with flexible options for receiving, responding, and sending. Enjoy using your WhatsApp automation project!
